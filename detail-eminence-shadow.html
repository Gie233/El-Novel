<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Eminence in Shadow | El-Novel</title>
  <link rel="stylesheet" href="Styles/Style.css" />
</head>
<body>
  <header>
    <a href="index.html" class="logo">El-Novel</a>
    <nav class="nav-center">
      <a href="index.html">Home</a>
      <a href="novels.html" class="active">Novels</a>
      <a href="explore.html">Explore</a>
      <a href="joinUs.html" >Join Us</a>
    </nav>
    <div class="theme-toggle">
      <input type="checkbox" id="mode-switch">
      <label for="mode-switch" class="switch"></label>
    </div>
  </header>

  <main class="novel-detail">
    <div class="detail-container">
      <div class="detail-content">
        <!-- COVER -->
        <div class="detail-cover">
          <img src="Library/To-Be-a-Power-in-the-Shadows.jpg" alt="Eminence in Shadow">
        </div>
  
        <!-- INFO -->
        <div class="detail-info">
          <h2>The Eminence in Shadow</h2>
  
          <p class="author"><strong>Author:</strong>Daisuke Aizawa</p>
  
          <div class="rating">★4.6/5</div>
  
          <p><strong>Genre:</strong> Comedy, Fantasy, Isekai Action</p>
  
          <p class="desc">
            “Seperti halnya semua anak mengagumi para pahlawan di masa kecil mereka, seorang anak laki-laki tertentu justru mengagumi mereka yang bersembunyi dalam bayang-bayang. Suatu hari, setelah menjalani kehidupan biasa sebagai karakter sampingan sambil menjalani latihan keras setiap malam, ia bereinkarnasi ke dunia lain dan memperoleh kekuatan tertinggi. Pemuda yang hanya berpura-pura menjadi sosok kuat yang misterius itu, para bawahannya yang salah paham, dan organisasi raksasa yang gelap dan penuh intrik…
            Inilah kisah seorang anak laki-laki yang mengagumi manipulasi dari balik bayangan, yang mungkin saja akan memerintah sisi gelap dari dunia lain.”
          </p>
  
          <div class="review-box">
            <h3>Reviewer’s Thoughts</h3>
            <p>“Komedi meta yang luar biasa. Sang tokoh utama terus mengikuti delusinya, tetapi dunia tampaknya sangat bersedia mengikuti alurnya. Ia menjalani hidup sebagai ‘orang biasa di siang hari, penguasa bayangan di malam hari,’ ditambah humor yang mengenali berbagai trope dari situasi yang ia hadapi, sehingga ia bisa membuat lelucon tentangnya. Ia kebanyakan bersikap datar dan sinis, mengakui chuunibyo-nya sebagai sebuah pilihan, namun tetap cukup sadar diri untuk memahami trope yang ada pada karakter lain.
            Ini adalah cerita yang bagus, dan memang ada kesalahpahaman, tetapi kesalahpahaman itu menjadi bagian dari plot, bukan alasan untuk perkembangan cerita yang dipaksakan, karena sang tokoh utama memasukkan banyak perencanaan dan usaha menuju tujuannya, dan berbagai kebetulan justru mendukung arah itu.”</p>
          </div>
          </section>


          <section class="novel-pv">
            <h3>Promotional Video</h3>

            <div class="pv-wrapper">
              <iframe
                src="https://www.youtube.com/embed/O5QO9vX1sKQ?si=hj4emuXWBgNpBHIX"
                title="Novel Promotional Video"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
              </iframe>
            </div>
          </section>
  
          <div class="detail-buttons">
            <a href="Novels.html" class="btn-small">← Back to Novels</a>
            <a href="https://isekai.fandom.com/wiki/The_Eminence_in_Shadow" class="btn-small">More Info</a>
          </div>
   </main>

   <footer>
    <p>© 2025 El-Novel. All rights reserved.</p>
    <div class="footer-links">
      <a href="AboutUs.html">About Us</a> 
    </div>
  </footer>

  <script>
    const switchToggle = document.getElementById("mode-switch");
    switchToggle.addEventListener("change", () => {
      document.body.classList.toggle("light-mode", switchToggle.checked);
    });
    const modeSwitch = document.getElementById("mode-switch");

// Ambil mode dari localStorage
const savedMode = localStorage.getItem("theme");
if (savedMode === "light") {
  document.body.classList.add("light-mode");
  modeSwitch.checked = true;
}

// Ketika switch diubah
modeSwitch.addEventListener("change", () => {
  if (modeSwitch.checked) {
    document.body.classList.add("light-mode");
    localStorage.setItem("theme", "light");
  } else {
    document.body.classList.remove("light-mode");
    localStorage.setItem("theme", "dark");
  }
});

// ===============================
// VISIT COUNTER FOR NOVEL DETAIL
// ===============================
function trackNovelVisit() {
    const titleElement = document.querySelector("h2");
    if (!titleElement) return; // stop if not a detail page

    const novelTitle = titleElement.innerText;
    const today = new Date().toISOString().slice(0, 10);

    const now = new Date();
    const weekKey = `${now.getFullYear()}-W${Math.ceil(now.getDate() / 7)}`;
    const monthKey = `${now.getFullYear()}-${now.getMonth() + 1}`;

    function load(key, def) {
        return JSON.parse(localStorage.getItem(key)) || def;
    }
    function save(key, data) {
        localStorage.setItem(key, JSON.stringify(data));
    }

    // === DAILY ===
    let daily = load("dailyVisits", {});
    let dailyDate = localStorage.getItem("dailyDate");
    if (dailyDate !== today) {
        daily = {};
        localStorage.setItem("dailyDate", today);
    }
    daily[novelTitle] = (daily[novelTitle] || 0) + 1;
    save("dailyVisits", daily);

    // === WEEKLY ===
    let weekly = load("weeklyVisits", {});
    let weeklyDate = localStorage.getItem("weeklyStart");
    if (weeklyDate !== weekKey) {
        weekly = {};
        localStorage.setItem("weeklyStart", weekKey);
    }
    weekly[novelTitle] = (weekly[novelTitle] || 0) + 1;
    save("weeklyVisits", weekly);

    // === MONTHLY ===
    let monthly = load("monthlyVisits", {});
    let monthlyDate = localStorage.getItem("monthlyStart");
    if (monthlyDate !== monthKey) {
        monthly = {};
        localStorage.setItem("monthlyStart", monthKey);
    }
    monthly[novelTitle] = (monthly[novelTitle] || 0) + 1;
    save("monthlyVisits", monthly);
}



// ====================================================
// RANKING PAGE — LOAD DATA
// ====================================================
function loadRanking(type, containerId = "rankingList") {
    const container = document.getElementById(containerId);
    if (!container) return;

    const data = JSON.parse(localStorage.getItem(type + "Visits")) || {};
    const sorted = Object.entries(data).sort((a, b) => b[1] - a[1]);

    container.innerHTML = "";

    if (sorted.length === 0) {
        container.innerHTML = "<li style='text-align:center;'>Belum ada data.</li>";
        return;
    }

    sorted.forEach(([title, count], i) => {
        container.innerHTML += `
            <li>
                <span class="rank-num">${i + 1}</span>
                <span class="rank-title">${title}</span>
                <span style="float:right;color:gray;">${count} views</span>
            </li>
        `;
    });
}

  </script>
</body>
</html>
